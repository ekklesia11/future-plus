"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const pg_1 = require("pg");
const DB_URL = process.env.databaseUrl;
exports.handler = async (event) => {
    console.log('event: ', event);
    const client = new pg_1.Client(DB_URL);
    client.connect();
    const timestamp = new Date().getTime();
    const body = {
        title: `Program: vol.${timestamp}`,
        description: 'Time to learn new program!',
        lecturerId: 1,
        time: timestamp
    };
    try {
        const text = 'INSERT INTO programs(title, description, time) VALUES($1, $2, $3) RETURNING *';
        const values = [body.title, body.description, body.time];
        const result = await client.query(text, values);
        client.end();
        return {
            result,
            statusCode: 200,
        };
    }
    catch (err) {
        console.log(err);
        return {
            statusCode: 500,
        };
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsMkJBQTRCO0FBRTVCLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDO0FBRXZDLE9BQU8sQ0FBQyxPQUFPLEdBQUcsS0FBSyxFQUFFLEtBQVUsRUFBRSxFQUFFO0lBQ3JDLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQzdCLE1BQU0sTUFBTSxHQUFHLElBQUksV0FBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2xDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUVqQixNQUFNLFNBQVMsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBRXZDLE1BQU0sSUFBSSxHQUFHO1FBQ1gsS0FBSyxFQUFFLGdCQUFnQixTQUFTLEVBQUU7UUFDbEMsV0FBVyxFQUFFLDRCQUE0QjtRQUN6QyxVQUFVLEVBQUUsQ0FBQztRQUNiLElBQUksRUFBRSxTQUFTO0tBQ2hCLENBQUM7SUFFRixJQUFJO1FBQ0YsTUFBTSxJQUFJLEdBQ1IsK0VBQStFLENBQUM7UUFDbEYsTUFBTSxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRXpELE1BQU0sTUFBTSxHQUFHLE1BQU0sTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFFaEQsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBRWIsT0FBTztZQUNMLE1BQU07WUFDTixVQUFVLEVBQUUsR0FBRztTQUNoQixDQUFDO0tBQ0g7SUFBQyxPQUFPLEdBQUcsRUFBRTtRQUNaLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDakIsT0FBTztZQUNMLFVBQVUsRUFBRSxHQUFHO1NBQ2hCLENBQUE7S0FDRjtBQUNILENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENsaWVudCB9IGZyb20gJ3BnJztcblxuY29uc3QgREJfVVJMID0gcHJvY2Vzcy5lbnYuZGF0YWJhc2VVcmw7XG5cbmV4cG9ydHMuaGFuZGxlciA9IGFzeW5jIChldmVudDogYW55KSA9PiB7XG4gIGNvbnNvbGUubG9nKCdldmVudDogJywgZXZlbnQpXG4gIGNvbnN0IGNsaWVudCA9IG5ldyBDbGllbnQoREJfVVJMKTtcbiAgY2xpZW50LmNvbm5lY3QoKTtcblxuICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICBjb25zdCBib2R5ID0ge1xuICAgIHRpdGxlOiBgUHJvZ3JhbTogdm9sLiR7dGltZXN0YW1wfWAsXG4gICAgZGVzY3JpcHRpb246ICdUaW1lIHRvIGxlYXJuIG5ldyBwcm9ncmFtIScsXG4gICAgbGVjdHVyZXJJZDogMSxcbiAgICB0aW1lOiB0aW1lc3RhbXBcbiAgfTtcblxuICB0cnkge1xuICAgIGNvbnN0IHRleHQgPSBcbiAgICAgICdJTlNFUlQgSU5UTyBwcm9ncmFtcyh0aXRsZSwgZGVzY3JpcHRpb24sIHRpbWUpIFZBTFVFUygkMSwgJDIsICQzKSBSRVRVUk5JTkcgKic7XG4gICAgY29uc3QgdmFsdWVzID0gW2JvZHkudGl0bGUsIGJvZHkuZGVzY3JpcHRpb24sIGJvZHkudGltZV07XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGllbnQucXVlcnkodGV4dCwgdmFsdWVzKTtcbiAgXG4gICAgY2xpZW50LmVuZCgpO1xuICBcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdWx0LFxuICAgICAgc3RhdHVzQ29kZTogMjAwLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1c0NvZGU6IDUwMCxcbiAgICB9XG4gIH1cbn07XG4iXX0=